# 🌟 Angus 插件合集

<div align="center">

![GitHub release (latest by date)](https://img.shields.io/github/v/release/Angus-fw/astrbot_plugin_remind)
![Python](https://img.shields.io/badge/python-3.7%2B-blue)
![License](https://img.shields.io/github/license/Angus-fw/astrbot_plugin_remind)
![Stars](https://img.shields.io/github/stars/Angus-fw/astrbot_plugin_remind?style=social)

> ✨ 为 AstrBot 开发的多功能插件合集，集成智能提醒、主动对话、涩图、服务器监控等实用功能。
> ✨ 已适配平台QQ(aiocqhttp),微信(wechatpadpro),微信公众平台(weixin_official_account)

[English](README.md) | [简体中文](README_zh.md)

</div>

## 📚 目录
- [🚀 功能特点](#🚀-功能特点)
- [🔧 安装方法](#🔧-安装方法)
- [💡 使用方法](#💡-使用方法)
  - [⏰ 智能提醒与任务系统](#⏰-智能提醒与任务系统)
  - [🤖 主动对话系统](#🤖-主动对话系统)
  - [🔞 涩图功能](#🔞-涩图功能)
  - [🖥️ 服务器状态监控](#🖥️-服务器状态监控)
  - [📝 关键词自定义回复](#📝-关键词自定义回复)
- [⚙️ 配置说明](#⚙️-配置说明)
- [📦 依赖要求](#📦-依赖要求)
- [💬 支持与反馈](#💬-支持与反馈)
- [📝 更新日志](#📝-更新日志)

## 🚀 功能特点

### ⏰ 智能提醒与任务系统
- ✨ 支持设置一次性或重复性的定时提醒
- 🤖 支持设置自动执行任务，到时间后AI会自动执行指定操作
- 🔄 支持调用其他LLM函数，实现更复杂的自动化任务
- 🎯 AI智能化提醒，生成自然语言的提醒内容
- 📅 支持多种重复模式：每天、每周、每月、每年
- 🏢 支持法定节假日判断，可设置仅在工作日或节假日触发的提醒和任务
- 👥 支持会话隔离，群聊中每个成员可以有独立的提醒和任务
- 📝 简单的命令管理系统
- 💾 持久化存储提醒和任务数据
- ⏰ 支持"明天"、"后天"等时间关键词，更自然的提醒设置

#### 使用示例
1. 设置提醒：
   ```bash
   /si 添加提醒 上班 8:00 明天
   /si 添加提醒 睡觉 22:00 每天
   /si 添加提醒 打卡 8:00 周日
   /si 添加提醒 周会 9:00 周一
   /si 添加提醒 开会 14:00 后天
   ```

2. 设置任务：
   ```bash
   /si 添加任务 天气预报 8:00 明天
   /si 添加任务 新闻汇总 12:00 每天
   /si 添加任务 打卡提醒 8:00 周日
   /si 添加任务 周报提醒 17:00 周五
   /si 添加任务 会议提醒 15:00 后天
   ```

3. 管理提醒和任务：
   ```bash
   /si 列表    # 查看所有提醒和任务
   /si 删除 1  # 删除序号为1的提醒或任务
   /si help  # 获取更多帮助信息
   ```

### 🤖 主动对话系统
- 💡 **支持多用户白名单**，主动对话可同时推送给多个用户，每个用户独立管理
- 📝 **白名单（目标用户ID）支持通过命令动态添加/删除，自动持久化，热更新，无需重启**
- ⏱️ 定时触发：每分钟检查一次，根据设定的概率随机触发对话
- 🗣️ 触发语句管理：支持查看、添加和删除触发语句
- ⚙️ 动态配置：可通过命令动态调整触发概率
- 👥 目标用户指定：可指定目标用户发送消息，支持多人
- 🤖 智能对话：基于历史对话生成个性化触发语句
- 🌈 **主动对话内容对每个用户都可个性化生成，避免所有人收到相同内容**

#### 使用示例
```bash
# 基础设置
/si 设置概率 0.5        # 设置50%的触发概率
/si 添加白名单 123456   # 添加目标用户
/si 列出白名单          # 查看当前白名单

# 触发语句管理
/si 添加语句 "今天天气真好，要不要出去走走？"
/si 列出语句            # 查看所有触发语句
/si 删除语句 1          # 删除第一个触发语句
```

### 🔞 涩图功能
- 🖼️ 发送随机涩图
- 🔞 发送R18涩图
- ⏱️ 可配置冷却时间
- 🔌 支持多平台适配

#### 使用示例
```bash
/si setu              # 获取随机涩图
/si taisele           # 获取R18涩图
/si 设置涩图冷却 30    # 设置30秒冷却时间
```

### 🖥️ 服务器状态监控
- 📊 精简版状态查看（CPU、内存）
- 📈 详细状态查看（CPU、内存、磁盘、网络、进程等）
- 🔄 实时数据更新

#### 使用示例
```bash
/si zt    # 查看精简版状态
/si 状态   # 查看详细状态
```

### 📝 关键词自定义回复
- 🎯 支持自定义关键词回复，@机器人并发送关键词即可自动回复
- 👮 支持管理员添加、删除关键词回复
- 📋 支持查看所有关键词回复
- 💾 数据持久化存储
- 🔄 支持多种命令格式，更加灵活

#### 使用示例
```bash
# 添加关键词回复（支持多种格式）
/si 添加回复 你好:你好啊，很高兴见到你！
si 添加回复 你好:你好啊，很高兴见到你！
添加回复 你好:你好啊，很高兴见到你！

# 查看所有关键词回复
/si 查看回复
si 查看回复
查看回复

# 删除关键词回复
/si 删除回复 你好
si 删除回复 你好
删除回复 你好
```

> 💡 **使用说明：**
> 1. 添加回复时，使用冒号 `:` 分隔关键词和回复内容
> 2. 关键词和回复内容都不能为空
> 3. 支持多种命令前缀格式，更加灵活
> 4. 只需@机器人并发送已设置的关键词，机器人会自动回复对应内容
> 5. 所有数据都会自动保存，重启后仍然有效

## 🔧 安装方法

```bash
# 1. 将插件文件夹 `astrbot_plugin_remind` 复制到 AstrBot 的 plugins 目录下
# 2. 重启 AstrBot
```

## 💡 使用方法

### ⏰ 智能提醒与任务系统

#### 命令列表
| 功能 | 命令格式 | 示例 |
|---|---|---|
| 添加提醒 | `/si 添加提醒 <内容> <时间> [开始星期/明天/后天] [重复类型]` | `/si 添加提醒 写周报 8:05 周一 每周` |
| 添加任务 | `/si 添加任务 <内容> <时间> [开始星期/明天/后天] [重复类型]` | `/si 添加任务 发送天气预报 8:00 每天` |
| 查看全部 | `/si 列表` |  |
| 删除指定 | `/si 删除 <序号>` | `/si 删除 1` |
| 帮助 | `/si help` |  |

> 💡 **使用提示：**
> - 时间格式：HH:MM 或 YYYY-MM-DD HH:MM
> - 时间关键词：明天、后天
> - 重复类型：每天、每周、每月、每年
> - 节假日类型：workday(仅工作日)、holiday(仅节假日)

### 🤖 主动对话系统

| 功能 | 命令 |
|---|---|
| 设置概率 | `/si 设置概率 <概率值>` |
| 查看概率 | `/si 列出对话概率` |
| 管理语句 | `/si 列出语句`<br>`/si 添加语句 <语句>`<br>`/si 删除语句 <编号>` |
| 管理白名单 | `/si 添加白名单 <用户ID>`<br>`/si 删除白名单 <用户ID>`<br>`/si 列出白名单` |

### 🔞 涩图功能

| 功能 | 命令 |
|---|---|
| 随机涩图 | `/si setu` |
| R18涩图 | `/si taisele` |
| 设置冷却 | `/si 设置涩图冷却 <秒数>` |

### 🖥️ 服务器状态监控

| 功能 | 命令 |
|---|---|
| 精简状态 | `/si zt` |
| 详细状态 | `/si 状态` |

### 📝 关键词自定义回复

| 功能 | 命令 |
|---|---|
| 添加回复 | `/si 添加回复 关键字:内容` |
| 查看回复 | `/si 查看回复` |
| 删除回复 | `/si 删除回复 关键字` |

> 💡 **使用提示：**
> - 所有命令都以 `/si` 开头
> - 关键词和回复内容使用冒号 `:` 分隔
> - 只需@机器人并发送已设置的关键词，机器人会自动回复对应内容

## ⚙️ 配置说明

### 配置与数据文件一览

| 功能模块 | 文件路径 | 说明 |
|---------|---------|------|
| 提醒和任务数据 | `data/astrbot_plugin_remind/reminder_data.json` | 所有提醒和任务的持久化数据 |
| 会话隔离配置 | `data/config/ai_reminder_config.json` | 是否启用会话隔离的配置 |
| 节假日数据缓存 | `data/astrbot_plugin_remind/holiday_cache.json` | 节假日API缓存 |
| 主动对话白名单 | `data/astrbot_plugin_remind/active_conversation.json` | 主动对话目标用户ID列表 |
| 关键词自定义回复 | `data/astrbot_plugin_remind/keyword_reply_config.json` | 关键词自动回复的自定义内容 |
| 配置结构说明 | `_conf_schema.json` | 插件所有配置项的结构和默认值说明 |

> 💡 所有数据/配置文件的根目录均通过 StarTools.get_data_dir("astrbot_plugin_remind") 自动统一管理，便于迁移和维护。

### 会话隔离功能
会话隔离功能使群聊中的每个成员都能拥有自己独立的提醒和任务列表，其他成员无法看到或操作。

- **关闭状态**：群聊中所有成员共享同一组提醒和任务列表
- **开启状态**：群聊中每个成员都有自己独立的提醒和任务列表

配置示例：
```json
{
    "unique_session": true,  // 启用会话隔离
    "enable_setu": true,     // 启用涩图功能
    "enable_server_status": true,  // 启用服务器状态监控
    "enable_active_conversation": true  // 启用主动对话
}
```

## 📦 依赖要求

| 依赖 | 版本 |
|------|------|
| AstrBot 框架 | v3.4.15+ |
| APScheduler | 最新 |
| Python | 3.7+ |
| aiohttp | 最新 |
| httpx | 最新 |
| psutil | 最新 |

## 💬 支持与反馈

- 📚 文档：[AstrBot插件开发文档](https://astrbot.soulter.top/center/docs/%E5%BC%80%E5%8F%91/%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/)
- 🐛 问题反馈：[GitHub Issues](https://github.com/Angus-fw/astrbot_plugin_remind)
- 💡 功能建议：[Discussions](https://github.com/Angus-fw/astrbot_plugin_remind/discussions)

## 📝 更新日志

### v1.1.3
- ⏰ 新增"明天"、"后天"时间关键词支持，使提醒设置更自然
- 🔄 优化提醒列表显示逻辑，修复显示问题
- 📝 统一命令格式，使用中文命令更直观
- 🐛 修复提醒数据保存和加载的问题
- 📚 更新文档，添加新功能说明

### v1.1.2
- 🎯 修复了部分已知问题
- 🎯 优化了代码结构，提高了性能
- 🎯 添加了更多配置选项，使插件更加灵活

### v0.0.1
- ✨ 初始版本发布
- 🎯 实现基本的提醒和任务功能
- 📅 支持节假日判断
- 🔄 支持多种重复模式
- 👥 添加会话隔离功能
- 📊 优化提醒和任务管理
- 🐛 改进错误处理机制
- 🤖 集成主动对话功能
- 🖼️ 集成涩图功能
- 🖥️ 集成服务器状态监控功能
- 📦 优化代码结构和性能
- ⚙️ 添加更多配置选项
- 📝 集成关键词自定义回复功能

## 📄 开源协议

本项目采用 [MIT](LICENSE) 协议开源。
